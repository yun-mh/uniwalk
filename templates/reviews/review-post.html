{% extends "base.html" %}
{% load i18n %}

{% block page_title %}
{% trans "レビュー投稿" %}
{% endblock page_title %}

{% block content %}

<div class="mx-auto pt-16 pb-10">

    <div class="container mx-auto flex">
        <div class="w-1/3 mr-10 h-50vh shadow-lg">
            <a href="{% url 'products:detail' product.pk %}">
                <div class="w-full h-1/2 bg-cover bg-center mb-2"
                    style="background-image: url({{ product.first_image }});">
                </div>
            </a>
            <div class="flex justify-between mb-2 px-5 truncate">
                <div class="w-full overflow-hidden">
                    <a href="{% url 'products:detail' product.pk %}" class="text-xl font-semibold">
                        {{ product.name }}
                    </a>
                </div>
            </div>
            <div class="flex justify-between items-center mb-2 px-5 truncate">
                <div class="w-4/5 overflow-hidden flex">
                    <span class="text-sm text-gray-600 block truncate">{{ product.category }}</span>
                </div>
                <span class="text-lg text-black font-medium">
                    &yen; {{ product.price }}
                </span>
            </div>

            <div class="font-medium text-center text-xl mt-5">
                {% blocktrans with review_count=product.reviews.count %}全 {{ review_count }} 件{% endblocktrans %}
            </div>
            <div class="text-center m-2">
                <i class="fas fa-star text-4xl text-teal-500"></i>
                <span class="block mt-2 text-2xl">{{ product.total_rating }}</span>
            </div>
        </div>

        <div class="w-2/3 p-5 flex flex-col mb-10">
            <div class="text-gray-800 font-semibold text-3xl my-5">
                {% trans 'レビュー投稿' %}
            </div>

            <div>
                <form action="{% url 'reviews:post' product.pk %}" method="POST" class="w-1/2 mx-auto">
                    {% csrf_token %}
                    {{ form }}
                    <button class="btn-link mt-5">Submit Review</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block javascript %}
{% endblock %}