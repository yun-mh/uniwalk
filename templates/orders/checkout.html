{% extends "base.html" %}
{% load i18n static humanize %}

{% block page_title %}
{% trans 'ご購入の手続き' %}
{% endblock page_title %}

{% block content %}

<div class="mx-auto pt-16 pb-10">

    <h3 class="w-full font-bold text-3xl mb-3 text-center">
        ご購入の手続き
    </h3>
    <div class="container mx-auto flex">
        <div class="w-2/3 flex flex-wrap mb-10 pr-10">
            <form method="POST">
                {% csrf_token %}
                {{ form }}
                <button class="btn-link">submit</button>
            </form>
        </div>

        <div class="w-1/3 flex flex-col h-full p-5 shadow-lg justify-between">
            <div class="border-b pt-3 pb-10">
                <h3 class="font-bold text-2xl text-center mb-5">
                    ご注文金額
                </h3>
                <div class="w-full">
                    <div class="flex flex-no-wrap justify-between">
                        <div class="font-semibold">合計(税込)</div>
                        <div>{{ total }}</div>
                    </div>
                </div>
            </div>

            <div class="pt-3 pb-5">
                <h3 class="font-bold text-2xl text-center mb-5">
                    カート
                </h3>
                <div class="w-full">
                    {% for cart_item in cart.cart_items.all %}
                    <div class="flex flex-no-wrap justify-between mb-5">
                        <div class="w-1/4 mr-5">
                            <img src="{{ cart_item.product.first_image }}">
                        </div>
                        <div class="w-3/4 flex flex-col">
                            <div>{{ cart_item.product.name }}</div>
                            <div class="text-sm">{{ cart_item.product.category }}</div>
                            <div class="text-sm">数量：{{ cart_item.quantity }}</div>
                            <div class="text-sm">小計：{{ cart_item.sub_total }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}