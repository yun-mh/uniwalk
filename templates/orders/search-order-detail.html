{% extends "base.html" %}
{% load i18n %}

{% block page_title %}
{% trans '注文詳細' %}
{% endblock page_title%}

{% block content %}
<div class="container mx-auto mt-10">
    <h2 class="text-center text-4xl font-bold">
        {% trans '注文詳細' %}
    </h2>
    <div class="container mx-auto flex">

        <div class="w-full mb-10 overflow-hidden shadow-md">
            <form method="POST" class="w-full h-full">
                {% csrf_token %}
                <div class="w-full flex items-center justify-between bg-gray-600 h-12 text-white px-5">
                    <h3 class="font-semibold text-lg">注文番号: {{ order.order_code }}</h3>
                    <span class="">注文日時: {{ order.order_date|date:'Y-m-d H:i:s' }}</span>
                </div>
                <div class="flex flex-no-wrap py-10 px-5">
                    <div class="w-3/4 flex flex-col justify-around">
                        <div>合計金額: {{ order.amount }}</div>
                        <div>注文者: {{ order.last_name_orderer }} {{ order.first_name_orderer }}</div>
                        <div>お届け先: {{ order.get_prefecture_recipient_display }} {{ order.address_city_recipient }}
                            {{ order.address_detail_recipient }}</div>
                        <div>総数量: {{ order.count_items_all }}</div>
                        <div>お支払い方法: {{ order.get_payment_display }}</div>
                        <div>処理状況: {{ order.step }}</div>
                    </div>
                </div>
                <div class="flex flex-no-wrap py-10 px-5">
                    {% for order_item in order.order_items.all %}
                    <div style="background-image: url();" class="w-1/4 h-40 bg-cover bg-center mr-3">
                        image
                    </div>
                    <div class="w-3/4 flex flex-col justify-around">
                        <div>商品名: {{ order_item.product }}</div>
                        <div>単価: {{ order_item.price }}</div>
                        <div>数量: {{ order_item.quantity }}</div>
                    </div>
                    {% endfor %}
                </div>

                <div class="w-full flex justify-around mb-5">
                    {% if order.step.step_code == "T01" or order.step.step_code == "T02" %}
                    <input type="hidden" name="target-order" value="{{ order.pk }}">
                    <button class="btn bg-red-500 text-white w-1/3 p-3">{% trans '注文取消' %}</button>
                    {% endif %}
                    {% if order.step.step_code != "T01" and order.step.step_code != "T02" and order.step.step_code != "T99" %}
                    <a href="{% url 'orders:receipt' order.order_code %}"
                        class="btn bg-red-500 text-white w-1/3 p-3">{% trans '領収書発行' %}</a>
                    {% endif %}
                </div>
            </form>
        </div>

    </div>
</div>

{% endblock content %}

{% block javascript %}
{% endblock %}